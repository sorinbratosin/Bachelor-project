{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{Container,Typography,Grid,Button}from'@mui/material';import{useNavigate}from'react-router-dom';import{Root,Sidebar,Main,PaperBox,Header,Value}from'./HomeStyles';import'./styles.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Home=()=>{const[userData,setUserData]=useState({lastName:'',dataIrigare:'',umiditate:'',dataAdaugarii:''});const navigate=useNavigate();useEffect(()=>{const userId=localStorage.getItem('userId');const token=localStorage.getItem('token');if(!userId||!token){navigate('/login');return;}axios.get(\"http://167.172.107.65:54653/api/date-home/\".concat(userId),{headers:{'Authorization':\"Bearer \".concat(token)}}).then(response=>{setUserData(response.data);}).catch(error=>{console.error('Error fetching user data:',error);if(error.response&&error.response.status===403){navigate('/login');}});},[navigate]);const handleLogout=()=>{localStorage.removeItem('message');localStorage.removeItem('token');localStorage.removeItem('userId');navigate('/login');};const formatDateTime=dateTime=>{return new Date(dateTime).toLocaleString('en-GB',{hour12:false}).replace(',','');};return/*#__PURE__*/_jsxs(\"div\",{className:\"background\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"overlay\"}),/*#__PURE__*/_jsx(Container,{className:\"content\",children:/*#__PURE__*/_jsxs(Root,{children:[/*#__PURE__*/_jsx(Sidebar,{children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"secondary\",fullWidth:true,onClick:handleLogout,children:\"Logout\"})}),/*#__PURE__*/_jsxs(Main,{children:[/*#__PURE__*/_jsxs(Header,{variant:\"h4\",children:[\"Bine ai venit, \",userData.lastName,\"!\"]}),/*#__PURE__*/_jsxs(PaperBox,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Ultima irigare:\"}),/*#__PURE__*/_jsx(Value,{variant:\"h4\",children:formatDateTime(userData.dataIrigare)})]}),/*#__PURE__*/_jsxs(PaperBox,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Cele mai recente date:\"}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsxs(Grid,{item:true,xs:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Umiditate:\"}),/*#__PURE__*/_jsxs(Value,{variant:\"h4\",children:[userData.umiditate,\" %\"]})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Data adaugarii:\"}),/*#__PURE__*/_jsx(Value,{variant:\"h4\",children:formatDateTime(userData.dataAdaugarii)})]})]})]})]})]})})]});};export default Home;","map":{"version":3,"names":["React","useEffect","useState","axios","Container","Typography","Grid","Button","useNavigate","Root","Sidebar","Main","PaperBox","Header","Value","jsx","_jsx","jsxs","_jsxs","Home","userData","setUserData","lastName","dataIrigare","umiditate","dataAdaugarii","navigate","userId","localStorage","getItem","token","get","concat","headers","then","response","data","catch","error","console","status","handleLogout","removeItem","formatDateTime","dateTime","Date","toLocaleString","hour12","replace","className","children","variant","color","fullWidth","onClick","container","spacing","item","xs"],"sources":["E:/React licenta/frontend-licenta/src/pages/Home.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { Container, Typography, Grid, Button } from '@mui/material';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Root, Sidebar, Main, PaperBox, Header, Value } from './HomeStyles';\r\nimport './styles.css';\r\n\r\nconst Home: React.FC = () => {\r\n  const [userData, setUserData] = useState({ lastName: '', dataIrigare: '', umiditate: '', dataAdaugarii: '' });\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const userId = localStorage.getItem('userId');\r\n    const token = localStorage.getItem('token');\r\n\r\n    if (!userId || !token) {\r\n      navigate('/login');\r\n      return;\r\n    }\r\n\r\n    axios.get(`http://167.172.107.65:54653/api/date-home/${userId}`, {\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    })\r\n      .then(response => {\r\n        setUserData(response.data);\r\n      })\r\n      .catch(error => {\r\n        console.error('Error fetching user data:', error);\r\n        if (error.response && error.response.status === 403) {\r\n          navigate('/login');\r\n        }\r\n      });\r\n  }, [navigate]);\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('message');\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('userId');\r\n    navigate('/login');\r\n  };\r\n\r\n  const formatDateTime = (dateTime: string) => {\r\n    return new Date(dateTime).toLocaleString('en-GB', { hour12: false }).replace(',', '');\r\n  };\r\n\r\n  return (\r\n    <div className=\"background\">\r\n      <div className=\"overlay\"></div>\r\n      <Container className=\"content\">\r\n        <Root>\r\n          <Sidebar>\r\n            <Button variant=\"contained\" color=\"secondary\" fullWidth onClick={handleLogout}>Logout</Button>\r\n          </Sidebar>\r\n          <Main>\r\n            <Header variant=\"h4\">Bine ai venit, {userData.lastName}!</Header>\r\n            <PaperBox>\r\n              <Typography variant=\"h6\">Ultima irigare:</Typography>\r\n              <Value variant=\"h4\">{formatDateTime(userData.dataIrigare)}</Value>\r\n            </PaperBox>\r\n            <PaperBox>\r\n              <Typography variant=\"h6\">Cele mai recente date:</Typography>\r\n              <Grid container spacing={2}>\r\n                <Grid item xs={6}>\r\n                  <Typography variant=\"h6\">Umiditate:</Typography>\r\n                  <Value variant=\"h4\">{userData.umiditate} %</Value>\r\n                </Grid>\r\n                <Grid item xs={6}>\r\n                  <Typography variant=\"h6\">Data adaugarii:</Typography>\r\n                  <Value variant=\"h4\">{formatDateTime(userData.dataAdaugarii)}</Value>\r\n                </Grid>\r\n              </Grid>\r\n            </PaperBox>\r\n          </Main>\r\n        </Root>\r\n      </Container>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}